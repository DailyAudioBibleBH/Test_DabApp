<?xml version="1.0" encoding="utf-8" ?>
<local:DabBaseContentPage
    xmlns:local="clr-namespace:DABApp" xmlns="http://xamarin.com/schemas/2014/forms" xmlns:t="clr-namespace:SlideOverKit;assembly=SlideOverKit"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml" xmlns:ff="clr-namespace:FFImageLoading.Forms;assembly=FFImageLoading.Forms"
             x:Class="DABApp.DabRecordingPage">
    <t:MenuContainerPage.Content>
        <StackLayout>
            <RelativeLayout x:Name="bannerContainer" HeightRequest="70" HorizontalOptions="FillAndExpand" VerticalOptions="Start">
                <ff:CachedImage x:Name="banner" Aspect="AspectFill" RelativeLayout.WidthConstraint="{ConstraintExpression Type=RelativeToParent, Property=Width, Factor=1}" RelativeLayout.HeightConstraint="{ConstraintExpression Type=RelativeToParent, Property=Height, Factor=1}"/>
                <StackLayout RelativeLayout.WidthConstraint="{ConstraintExpression Type=RelativeToParent, Property=Width, Factor=1}" RelativeLayout.HeightConstraint="{ConstraintExpression Type=RelativeToParent, Property=Height, Factor=1}">
                    <Label Text="Audio Recordings" HorizontalOptions="Center" VerticalOptions="CenterAndExpand" FontSize="30" Style="{StaticResource playerLabelStyle}"/>
                </StackLayout>
            </RelativeLayout>
            <StackLayout Padding="20">
                <Label x:Name="Instructions" Style="{StaticResource playerLabelStyle}" Text="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque id nisl vel turpis sodales cursus et ac lectus. Curabitur ultricies egestas nibh a pharetra. Vestibulum porttitor eget ante vitae pellentesque. Nulla facilisi. Ut pharetra, velit et condimentum interdum, urna neque imperdiet tellus, a malesuada quam sem eu ligula."/>
            </StackLayout>
           
                <!--<Button Text="Play" Clicked="OnPlay" />
                <Button Text="Submit" Clicked="OnSubmit"/>-->
            <StackLayout HeightRequest="100">
                <local:DabSeekBar x:Name="SeekBar" HorizontalOptions="FillAndExpand" Minimum="0" VerticalOptions="CenterAndExpand" Value="{Binding Source={x:Static local:AudioPlayer.Instance}, Path=CurrentTime}" Maximum="{Binding Source={x:Static local:AudioPlayer.Instance}, Path=TotalTime}" Margin="20, 0, 20, 0"/>
                <StackLayout x:Name="AudioVisualizer" HeightRequest="100" HorizontalOptions="CenterAndExpand" Orientation="Horizontal" IsVisible="{Binding IsRecording}" VerticalOptions="StartAndExpand">
                    <BoxView x:Name="LeftMostAudioVisualizer" Color="White" HeightRequest="{Binding LastAveragePower}" IsVisible="{Binding IsRecording}" WidthRequest="10" HorizontalOptions="CenterAndExpand" VerticalOptions="CenterAndExpand"/>
                    <BoxView x:Name="CenterLeftAudioVisualizer" Color="White" HeightRequest="{Binding MiddleAveragePower}" IsVisible="{Binding IsRecording}" WidthRequest="10" HorizontalOptions="CenterAndExpand" VerticalOptions="CenterAndExpand"/>
                    <BoxView x:Name="CenterAudioVisualizer" Color="White" HeightRequest="{Binding RecentAveragePower}" IsVisible="{Binding IsRecording}" WidthRequest="10" HorizontalOptions="CenterAndExpand" VerticalOptions="CenterAndExpand"/>
                    <BoxView x:Name="CenterRightAudioVisualizer" Color="White" HeightRequest="{Binding MiddleAveragePower}" IsVisible="{Binding IsRecording}" WidthRequest="10" HorizontalOptions="CenterAndExpand" VerticalOptions="CenterAndExpand"/>
                    <BoxView x:Name="RightMostAudioVisualizer" Color="White" HeightRequest="{Binding LastAveragePower}" IsVisible="{Binding IsRecording}" WidthRequest="10" HorizontalOptions="CenterAndExpand" VerticalOptions="CenterAndExpand"/>
                </StackLayout>
            </StackLayout>
            <Label x:Name="Timer" HorizontalOptions="CenterAndExpand" VerticalOptions="StartAndExpand" Text="{Binding RecordingTime}"/>
            <Image x:Name="Record" Source="{Binding RecordImageUrl}" VerticalOptions="StartAndExpand" Style="{StaticResource imageButtonStyle}" HeightRequest="65"/>
            <StackLayout Padding="10">
                <Button x:Name="Submit" Text="Submit" FontAttributes="Bold" FontSize="Large" Clicked="OnSubmit" IsVisible="{Binding Recorded}" IsEnabled="{Binding Reviewed}" VerticalOptions="StartAndExpand" Style="{StaticResource highlightedButtonStyle}"/>
            </StackLayout>
            <StackLayout Orientation="Horizontal" VerticalOptions="EndAndExpand" Padding="10">
                <Button x:Name="Delete" Text="Delete" Clicked="OnDelete" IsVisible="{Binding Recorded}" HorizontalOptions="CenterAndExpand"/>
                <Button x:Name="Cancel" Text="Cancel" Clicked="OnCancel" HorizontalOptions="CenterAndExpand"/>
            </StackLayout>
        </StackLayout>
    </t:MenuContainerPage.Content>
</local:DabBaseContentPage>